<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:th="http://www.thymeleaf.org" 
      layout:decorate="~{layouts/jquery}">
    <head>
        <title>Admin - Exam form</title>
    </head>
    <body >
    <main th:fragment="content">  
  
   
    <nav class="tabs" th:include="~{fragments/nav :: admin}" />
  
  <div class="info" th:if="${globalMessage}"
			th:text="${globalMessage}">Some Success message</div>
  
  <div class="row">
   
  
  	<h4 th:unless="${exam} and ${exam.id}">Add Exam</h4>
  	<h4 th:if="${exam} and ${exam.id}"> Edit Exam </h4>
  		
  		<form id="examForm" th:action="@{/admin/exam/add/}" th:object="${exam}"
			action="#" method="post">
			
			<div th:if="${#fields.hasErrors('*')}" class="error">
				<p th:each="error : ${#fields.errors('*')}" th:text="${error}">
					Validation error</p>
			</div>
			
			<input type="hidden" th:field="*{id}" />

			<label for="title">Title</label> 
 			<input type="text" th:field="*{title}" th:class="${#fields.hasErrors('title')} ? 'field-error'" />
 			<br />
 			
 			<label >Message (Optional) <br />
 			<textarea  th:field="*{message}" th:class="${#fields.hasErrors('message')} ? 'field-error'" /> </label><br />

 			<div><h5>Questions</h5>
 			
 			
 			<th:block th:each="q,iter : ${exam.questions}" >
 				<input type="hidden" th:field="*{questions[__${iter.index}__]}" />
 				<p th:text="${iter.index}+') '+${q}">
 			</th:block> 
			</div>
			
			<br/>
			
			<div class="form-actions">
				<input type="submit" value="Save" name="save"  class="link_button"/>
				<input th:unless="${exam.id} and ${exam.id}!=''" type="submit" value="Save and Add another Exam" name="saveAdd" class="link_button"/>
				<input th:if="${exam.id} and ${exam.id}!=''" type="submit" value="Delete" name="del"  class="link_button"/>
				<input type="submit" value="cancel" name="cancel"  class="link_button"/>
			</div>

		</form>
 		
 </div>
 
 
 
 </main>
    </body>
</html>